#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running TDD enforcement checks..."

# Run TDD validation first
echo "ğŸ“ Validating test-first development..."
node scripts/tdd-enforcement.js

# Run coverage validation
echo "ğŸ“Š Validating test coverage..."
node scripts/coverage-validation.js

# Run existing lint-staged
echo "ğŸ”§ Running linting and formatting..."
npx lint-staged

# Run tests for changed files
echo "ğŸ§ª Running tests for changed files..."
pnpm test:changed -- --run

echo "âœ… All TDD checks passed!"