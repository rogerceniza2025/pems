/* Import design tokens from config package */
@import '@pems/config-tailwind/tokens.css';

@import 'tailwindcss/preflight';
@tailwind utilities;

/* UI package specific styles - Only non-conflicting utilities */
@layer components {
  /* Dialog/Modal components */
  .dialog-overlay {
    position: fixed;
    inset: 0;
    z-index: var(--z-modal-backdrop);
    background-color: oklch(var(--color-background) / 0.8);
    backdrop-filter: blur(var(--blur-base));
    contain: layout style paint;
  }

  .dialog-overlay[data-state='open'] {
    animation: fadeIn 0.2s ease-out;
  }

  .dialog-overlay[data-state='closed'] {
    animation: fadeOut 0.2s ease-out;
  }

  .dialog-content {
    position: fixed;
    left: 50%;
    top: 50%;
    z-index: var(--z-modal);
    display: grid;
    width: 100%;
    max-width: 32rem;
    transform: translateX(-50%) translateY(-50%);
    gap: var(--spacing-4);
    border: 1px solid oklch(var(--color-border));
    background-color: oklch(var(--color-background));
    padding: var(--spacing-6);
    box-shadow: var(--shadow-lg);
    transition: all var(--duration-200) var(--ease-fluid);
    border-radius: var(--radius-lg);
    contain: layout style paint;
    content-visibility: auto;
  }

  .dialog-content[data-state='open'] {
    animation:
      zoomIn 0.2s ease-out,
      slideInFromTop 0.2s ease-out,
      fadeIn 0.2s ease-out;
  }

  .dialog-content[data-state='closed'] {
    animation:
      zoomOut 0.2s ease-out,
      slideOutToTop 0.2s ease-out,
      fadeOut 0.2s ease-out;
  }

  /* Dropdown menu */
  .dropdown-menu-content {
    z-index: var(--z-popover);
    min-width: 8rem;
    overflow: hidden;
    border-radius: var(--radius-md);
    border: 1px solid oklch(var(--color-border));
    background-color: oklch(var(--color-popover));
    padding: var(--spacing-1);
    color: oklch(var(--color-popover-foreground));
    box-shadow: var(--shadow-md);
    contain: layout style paint;
  }

  .dropdown-menu-content[data-state='open'] {
    animation:
      zoomIn 0.2s ease-out,
      fadeIn 0.2s ease-out;
  }

  .dropdown-menu-content[data-state='closed'] {
    animation:
      zoomOut 0.2s ease-out,
      fadeOut 0.2s ease-out;
  }

  .dropdown-menu-content[data-side='bottom'] {
    animation:
      zoomIn 0.2s ease-out,
      slideInFromTop 0.2s ease-out,
      fadeIn 0.2s ease-out;
  }

  .dropdown-menu-content[data-side='left'] {
    animation:
      zoomIn 0.2s ease-out,
      slideInFromRight 0.2s ease-out,
      fadeIn 0.2s ease-out;
  }

  .dropdown-menu-content[data-side='right'] {
    animation:
      zoomIn 0.2s ease-out,
      slideInFromLeft 0.2s ease-out,
      fadeIn 0.2s ease-out;
  }

  .dropdown-menu-content[data-side='top'] {
    animation:
      zoomIn 0.2s ease-out,
      slideInFromBottom 0.2s ease-out,
      fadeIn 0.2s ease-out;
  }

  /* Toast/Notification */
  .toast {
    pointer-events: auto;
    position: relative;
    display: flex;
    width: 100%;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-4);
    overflow: hidden;
    border-radius: var(--radius-md);
    border: 1px solid oklch(var(--color-border));
    padding: var(--spacing-6);
    padding-right: var(--spacing-8);
    box-shadow: var(--shadow-lg);
    transition: all var(--duration-200) var(--ease-fluid);
    contain: layout style paint;
  }

  .toast[data-swipe='cancel'] {
    transform: translateX(0);
  }

  .toast[data-swipe='end'] {
    transform: translateX(var(--radix-toast-swipe-end-x));
  }

  .toast[data-swipe='move'] {
    transform: translateX(var(--radix-toast-swipe-move-x));
    transition: none;
  }

  .toast[data-state='open'] {
    animation: slideInFromTop 0.2s ease-out;
  }

  .toast[data-state='closed'] {
    animation:
      slideOutToRight 0.2s ease-out,
      fadeOut 0.2s ease-out;
  }

  .toast[data-swipe='end'] {
    animation:
      slideOutToRight 0.2s ease-out,
      fadeOut 0.2s ease-out;
  }

  @media (min-width: 640px) {
    .toast[data-state='open'] {
      animation: slideInFromBottom 0.2s ease-out;
    }
  }

  /* Tabs */
  .tabs-list {
    display: inline-flex;
    height: 2.5rem;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md);
    background-color: oklch(var(--color-muted));
    padding: var(--spacing-1);
    color: oklch(var(--color-muted-foreground));
    contain: layout style paint;
  }

  .tabs-trigger {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    border-radius: 0.125rem;
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s;
  }

  .tabs-trigger:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px hsl(var(--ring)),
      0 0 0 4px transparent;
  }

  .tabs-trigger:disabled {
    pointer-events: none;
    opacity: 0.5;
  }

  .tabs-trigger[data-state='active'] {
    background-color: oklch(var(--color-background));
    color: oklch(var(--color-foreground));
    box-shadow: var(--shadow-sm);
  }

  /* Table */
  .table {
    width: 100%;
    caption-side: bottom;
    font-size: 0.875rem;
  }

  .table-header tr {
    border-bottom: 1px solid hsl(var(--border));
  }

  .table-head {
    height: 3rem;
    padding: 0 1rem;
    text-align: left;
    vertical-align: middle;
    font-weight: 500;
    color: hsl(var(--muted-foreground));
  }

  .table-head:has([role='checkbox']) {
    padding-right: 0;
  }

  .table-body tr:last-child {
    border: 0;
  }

  .table-row {
    border-bottom: 1px solid hsl(var(--border));
    transition: background-color 0.2s;
  }

  .table-row:hover {
    background-color: hsl(var(--muted) / 0.5);
  }

  .table-row[data-state='selected'] {
    background-color: hsl(var(--muted));
  }

  .table-cell {
    padding: 1rem;
    vertical-align: middle;
  }

  .table-cell:has([role='checkbox']) {
    padding-right: 0;
  }

  /* Skeleton loading */
  .skeleton {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    border-radius: var(--radius-md);
    background-color: oklch(var(--color-muted));
    contain: layout style paint;
  }

  /* Separator */
  .separator {
    flex-shrink: 0;
    background-color: oklch(var(--color-border));
    contain: layout style paint;
  }

  .separator-horizontal {
    height: 1px;
    width: 100%;
  }

  .separator-vertical {
    height: 100%;
    width: 1px;
  }
}

/* UI package specific utilities */
@layer utilities {
  /* Focus ring utilities */
  .focus-ring:focus {
    outline: none;
    box-shadow:
      0 0 0 2px oklch(var(--color-ring)),
      0 0 0 4px transparent;
  }

  .focus-ring-primary:focus {
    outline: none;
    box-shadow:
      0 0 0 2px oklch(var(--color-primary)),
      0 0 0 4px transparent;
  }

  .focus-ring-destructive:focus {
    outline: none;
    box-shadow:
      0 0 0 2px oklch(var(--color-destructive)),
      0 0 0 4px transparent;
  }

  /* Screen reader only utilities */
  .sr-only {
    position: absolute;
    height: 1px;
    width: 1px;
    overflow: hidden;
    white-space: nowrap;
    border: 0;
    padding: 0;
    clip-path: inset(50%);
    -webkit-clip-path: inset(50%);
  }

  .not-sr-only {
    position: static;
    height: auto;
    width: auto;
    overflow: visible;
    white-space: normal;
    padding: 0;
    clip-path: none;
  }

  /* Visually hidden but accessible */
  .visually-hidden {
    position: absolute;
    height: 1px;
    width: 1px;
    overflow: hidden;
    white-space: nowrap;
    border: 0;
    padding: 0;
    clip-path: inset(50%);
    -webkit-clip-path: inset(50%);
  }

  /* Reduced motion utilities */
  @media (prefers-reduced-motion: reduce) {
    .motion-reduce {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* High contrast mode utilities */
  @media (prefers-contrast: high) {
    .high-contrast-border {
      border-width: 2px !important;
    }
  }
}
