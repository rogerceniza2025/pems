{
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "pnpm build",
    "watchPatterns": [
      "src/**",
      "package.json",
      "pnpm-lock.yaml",
      "turbo.json"
    ]
  },
  "deploy": {
    "startCommand": "pnpm start",
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 300,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  },
  "services": {
    "api": {
      "source": "apps/api",
      "build": {
        "builder": "NIXPACKS",
        "buildCommand": "cd apps/api && pnpm build",
        "watchPatterns": [
          "apps/api/src/**",
          "packages/**"
        ]
      },
      "deploy": {
        "startCommand": "cd apps/api && pnpm start",
        "healthcheckPath": "/api/health",
        "port": 3000
      }
    },
    "web": {
      "source": "apps/web",
      "build": {
        "builder": "NIXPACKS",
        "buildCommand": "cd apps/web && pnpm build",
        "watchPatterns": [
          "apps/web/src/**",
          "packages/**"
        ]
      },
      "deploy": {
        "startCommand": "cd apps/web && pnpm start",
        "healthcheckPath": "/",
        "port": 3001
      }
    },
    "admin": {
      "source": "apps/admin",
      "build": {
        "builder": "NIXPACKS",
        "buildCommand": "cd apps/admin && pnpm build",
        "watchPatterns": [
          "apps/admin/src/**",
          "packages/**"
        ]
      },
      "deploy": {
        "startCommand": "cd apps/admin && pnpm start",
        "healthcheckPath": "/",
        "port": 3002
      }
    }
  }
}